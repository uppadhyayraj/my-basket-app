# Test Plan: Product Filtering API

## Document Information
- **Test Plan ID**: 1.3.3-Test-Plan
- **Application**: MyBasket Lite
- **Target Component**: Product Service - `applyFilters` Logic
- **Endpoint**: GET /api/products (Port 3001)
- **Date**: January 26, 2026
- **Test Type**: Manual Functional Testing

---

## Executive Summary

This test plan covers comprehensive manual testing of the product filtering functionality, with a focus on `minPrice` and `maxPrice` boundary validation. Tests are organized into three categories: Positive (happy path), Negative (invalid inputs), and Edge cases.

---

## Test Scope

| Aspect | Details |
|--------|---------|
| **Features Tested** | Price range filtering (minPrice, maxPrice), combined filters |
| **Filters in Scope** | minPrice, maxPrice, category, inStock, search |
| **Primary Focus** | minPrice and maxPrice boundary conditions |
| **API Version** | Current |
| **Test Environment** | Local/Development (Port 3001) |

---

## Test Cases in Cucumber Format

### Feature: Product Price Filtering

```gherkin
Feature: Filter products by price range
  As a customer
  I want to filter products by minimum and maximum price
  So that I can find products within my budget

  Background:
    Given the API endpoint is "http://localhost:3001/api/products"
    And the product service contains sample products with various prices

  # ==================== POSITIVE TEST CASES ====================

  Scenario: TC-001 - Filter products within valid price range
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | 10    |
      | maxPrice  | 50    |
    Then the response status should be 200
    And the response should contain only products with price >= 10 AND <= 50
    And the response should have "total" count matching filtered results

  Scenario: TC-002 - Filter products with only minPrice specified
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | 25    |
    Then the response status should be 200
    And the response should contain only products with price >= 25
    And products with price < 25 should be excluded

  Scenario: TC-003 - Filter products with only maxPrice specified
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | maxPrice  | 75    |
    Then the response status should be 200
    And the response should contain only products with price <= 75
    And products with price > 75 should be excluded

  Scenario: TC-004 - Filter products at exact price boundary (minPrice = maxPrice)
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | 10    |
      | maxPrice  | 10    |
    Then the response status should be 200
    And the response should contain only products with price = 10
    And the "total" count should match the number of products priced at exactly 10

  Scenario: TC-005 - Apply price filter combined with category filter
    When I call GET /api/products with parameters:
      | Parameter | Value        |
      | minPrice  | 20           |
      | maxPrice  | 60           |
      | category  | electronics  |
    Then the response status should be 200
    And the response should contain only products matching BOTH conditions:
      | Condition | Value |
      | price     | >= 20 AND <= 60 |
      | category  | electronics |
    And the "total" count should reflect combined filter results

  # ==================== NEGATIVE TEST CASES ====================

  Scenario: TC-006 - minPrice greater than maxPrice
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | 100   |
      | maxPrice  | 10    |
    Then the response status should be 200
    And the response should return an empty "products" array
    And the "total" count should be 0

  Scenario: TC-007 - Negative minPrice value
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | -50   |
    Then the response status should be 200
    And the response should contain products with price >= -50
    And products should be returned (business rule validation needed)

  Scenario: TC-008 - Negative maxPrice value
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | maxPrice  | -10   |
    Then the response status should be 200 OR 400
    And if status is 200: the response should return an empty "products" array
    And if status is 400: an error message should be returned

  Scenario: TC-009 - Non-numeric minPrice parameter
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | abc   |
      | maxPrice  | 50    |
    Then the response status should be 400 OR the parameter should be ignored
    And if ignored: all products with price <= 50 should be returned
    And if error: error response should contain validation message

  Scenario: TC-010 - Non-numeric maxPrice parameter
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | 10    |
      | maxPrice  | xyz   |
    Then the response status should be 400 OR the parameter should be ignored
    And if ignored: all products with price >= 10 should be returned
    And if error: error response should contain validation message

  Scenario: TC-011 - Null or undefined price filter values
    When I call GET /api/products with request body containing:
      | Field    | Value     |
      | minPrice | null      |
      | maxPrice | undefined |
    Then the response status should be 200
    And price filters should be skipped
    And all products should be returned (no price filtering)

  # ==================== EDGE CASE TEST CASES ====================

  Scenario: TC-012 - Zero price boundary
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | 0     |
      | maxPrice  | 100   |
    Then the response status should be 200
    And the response should contain products with price between 0 and 100 (inclusive)
    And products priced at exactly 0 should be included

  Scenario: TC-013 - Very large price range
    When I call GET /api/products with parameters:
      | Parameter | Value  |
      | minPrice  | 0      |
      | maxPrice  | 999999 |
    Then the response status should be 200
    And the response should contain all products within that range
    And the "total" count should be accurate

  Scenario: TC-014 - Decimal/float price values
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | 10.50 |
      | maxPrice  | 99.99 |
    Then the response status should be 200
    And the response should correctly filter products with decimal prices
    And products with price 10.50 to 99.99 should be included

  Scenario: TC-015 - No products match specified price filter
    When I call GET /api/products with parameters:
      | Parameter | Value  |
      | minPrice  | 10000  |
      | maxPrice  | 20000  |
    Then the response status should be 200
    And the response should return empty "products" array
    And the "total" count should be 0
    And the "totalPages" should be 0

  Scenario: TC-016 - Price filter combined with pagination (page 2)
    When I call GET /api/products with parameters:
      | Parameter | Value |
      | minPrice  | 10    |
      | maxPrice  | 100   |
      | page      | 2     |
      | limit     | 5     |
    Then the response status should be 200
    And the response should contain filtered products for page 2
    And the "page" field should equal 2
    And the "limit" field should equal 5
    And products should be from the filtered result set, not all products

```

---

## Test Execution Guidelines

### Pre-Requisites
1. Product Service is running on `http://localhost:3001`
2. Sample products are loaded in the service
3. API is accessible and responsive

### Test Execution Steps
1. Start product service microservice
2. Open API endpoint in Postman or similar tool
3. Execute each scenario in order
4. Document actual vs. expected results
5. Log any deviations

### Expected Response Structure
```json
{
  "products": [
    {
      "id": "string",
      "name": "string",
      "price": "number",
      "category": "string",
      "inStock": "boolean",
      "description": "string",
      "dataAiHint": "string"
    }
  ],
  "total": "number",
  "page": "number",
  "limit": "number",
  "totalPages": "number"
}
```

---

## Key Validation Points

| Point | Validation |
|-------|-----------|
| **Inclusive Boundaries** | minPrice and maxPrice use `>=` and `<=` operators |
| **Filter Independence** | Each filter can be applied independently |
| **Combined Filters** | Multiple filters are applied with AND logic |
| **Pagination** | Pagination is applied AFTER filtering |
| **Empty Results** | Total count should reflect filtered results, not all products |

---

## Known Issues & Notes

âš ï¸ **Identified Gaps** (From Code Review):
- No validation for negative prices
- No validation that minPrice â‰¤ maxPrice
- No type checking for numeric inputs
- Invalid inputs may be silently ignored vs. returning errors

ðŸ’¡ **Recommendations**:
1. Implement input validation middleware
2. Add business logic to reject negative prices
3. Return 400 Bad Request for invalid numeric inputs
4. Document API error responses

---

## Test Result Summary (To be filled after execution)

| Test ID | Status | Notes |
|---------|--------|-------|
| TC-001  | â¬œ TBD | |
| TC-002  | â¬œ TBD | |
| TC-003  | â¬œ TBD | |
| TC-004  | â¬œ TBD | |
| TC-005  | â¬œ TBD | |
| TC-006  | â¬œ TBD | |
| TC-007  | â¬œ TBD | |
| TC-008  | â¬œ TBD | |
| TC-009  | â¬œ TBD | |
| TC-010  | â¬œ TBD | |
| TC-011  | â¬œ TBD | |
| TC-012  | â¬œ TBD | |
| TC-013  | â¬œ TBD | |
| TC-014  | â¬œ TBD | |
| TC-015  | â¬œ TBD | |
| TC-016  | â¬œ TBD | |

**Legend**: âœ… Pass | âŒ Fail | âš ï¸ Blocked | â¬œ TBD

---

## Sign-Off

| Role | Name | Date | Signature |
|------|------|------|-----------|
| QA Engineer | [Name] | [Date] | |
| Product Owner | [Name] | [Date] | |
| Tech Lead | [Name] | [Date] | |
