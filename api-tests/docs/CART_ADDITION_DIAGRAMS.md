# Cart Addition Test Suite - Architecture & Flow

## ğŸ—ï¸ Test Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Cart Addition Test Suite                           â”‚
â”‚        tests/cart-addition.spec.ts                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Successful Item Addition (6 tests)                 â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Add item with valid inputs                       â”‚   â”‚
â”‚  â”‚  âœ“ Verify 200 OK status                            â”‚   â”‚
â”‚  â”‚  âœ“ Verify cart updates                             â”‚   â”‚
â”‚  â”‚  âœ“ Verify total price                              â”‚   â”‚
â”‚  â”‚  âœ“ Verify item in response                         â”‚   â”‚
â”‚  â”‚  âœ“ Verify itemId assignment                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Response Structure Validation (3 tests)            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Required fields present                          â”‚   â”‚
â”‚  â”‚  âœ“ Field types correct                             â”‚   â”‚
â”‚  â”‚  âœ“ Item structure valid                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Add Multiple Items (3 tests)                       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Multiple different items                        â”‚   â”‚
â”‚  â”‚  âœ“ Price accumulation                              â”‚   â”‚
â”‚  â”‚  âœ“ Duplicate items (quantity increase)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Error Handling - Invalid Inputs (6 tests)         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Missing productId â†’ 400                         â”‚   â”‚
â”‚  â”‚  âœ“ Missing quantity â†’ default 1                    â”‚   â”‚
â”‚  â”‚  âœ“ Zero quantity â†’ 400                             â”‚   â”‚
â”‚  â”‚  âœ“ Negative quantity â†’ 400                         â”‚   â”‚
â”‚  â”‚  âœ“ Empty productId â†’ 400                           â”‚   â”‚
â”‚  â”‚  âœ“ Non-existent product â†’ 404                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Business Logic Validation (4 tests)                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Item quantity matches request                   â”‚   â”‚
â”‚  â”‚  âœ“ Product details preserved                       â”‚   â”‚
â”‚  â”‚  âœ“ Item count accuracy                             â”‚   â”‚
â”‚  â”‚  âœ“ Total price calculation                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Edge Cases (3 tests)                               â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Large quantities (1000+)                        â”‚   â”‚
â”‚  â”‚  âœ“ Decimal quantities                              â”‚   â”‚
â”‚  â”‚  âœ“ Rapid consecutive additions                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Response JSON Body Assertions (5 tests)           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ Valid JSON response                             â”‚   â”‚
â”‚  â”‚  âœ“ Required fields present                         â”‚   â”‚
â”‚  â”‚  âœ“ Items array contains items                      â”‚   â”‚
â”‚  â”‚  âœ“ Numeric fields have correct types               â”‚   â”‚
â”‚  â”‚  âœ“ Field values are valid                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Test Flow Diagram

```
                    Start Test
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Setup Test Data             â”‚
        â”‚  - User ID                   â”‚
        â”‚  - Product ID                â”‚
        â”‚  - Quantity                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Send POST Request            â”‚
        â”‚  /api/cart/:userId/items      â”‚
        â”‚  {productId, quantity}        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚
                â–¼                â–¼
            SUCCESS           ERROR
            (200 OK)          (400/404)
                â”‚                â”‚
                â–¼                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Parse Response   â”‚  â”‚ Check Status   â”‚
        â”‚ {items, total}   â”‚  â”‚ Verify Error   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Message        â”‚
                â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚
                â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Validate JSON    â”‚  â”‚ Verify Error   â”‚
        â”‚ Structure        â”‚  â”‚ Handling       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                    â”‚
                â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Assert Fields:   â”‚  â”‚ Assert Error   â”‚
        â”‚ - userId         â”‚  â”‚ Status         â”‚
        â”‚ - items[]        â”‚  â”‚ Message        â”‚
        â”‚ - itemCount      â”‚  â”‚ Details        â”‚
        â”‚ - totalPrice     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                â”‚                    â”‚
                â–¼                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Verify Business  â”‚  â”‚ All Assertions â”‚
        â”‚ Logic:           â”‚  â”‚ Pass âœ“         â”‚
        â”‚ - Quantity Match â”‚  â”‚                â”‚
        â”‚ - Price Calc     â”‚  â”‚ Test Complete  â”‚
        â”‚ - Item Count     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ All Assertions   â”‚
        â”‚ Pass âœ“           â”‚
        â”‚                  â”‚
        â”‚ Test Complete    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ API Request/Response Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TEST REQUEST                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  POST http://localhost:9002/api/cart/user-001/items           â”‚
â”‚  Content-Type: application/json                               â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    "productId": "1",         â† Organic Apples ID              â”‚
â”‚    "quantity": 2             â† Quantity to add                â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Cart Service     â”‚
                    â”‚ :9002            â”‚
                    â”‚                  â”‚
                    â”‚ Routes.ts        â”‚
                    â”‚ Service.ts       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       TEST RESPONSE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  HTTP/1.1 200 OK                                               â”‚
â”‚  Content-Type: application/json                               â”‚
â”‚                                                                 â”‚
â”‚  {                                                              â”‚
â”‚    "userId": "user-001",                                       â”‚
â”‚    "items": [                                                  â”‚
â”‚      {                                                          â”‚
â”‚        "itemId": "item-001",                                   â”‚
â”‚        "productId": "1",                                       â”‚
â”‚        "name": "Organic Apples",                              â”‚
â”‚        "price": 3.99,                                         â”‚
â”‚        "quantity": 2                                          â”‚
â”‚      }                                                          â”‚
â”‚    ],                                                           â”‚
â”‚    "itemCount": 1,                                            â”‚
â”‚    "totalPrice": 7.98                                         â”‚
â”‚  }                                                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Validate & Assert
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Response         â”‚
                    â”‚ Validation       â”‚
                    â”‚                  â”‚
                    â”‚ âœ“ Status 200     â”‚
                    â”‚ âœ“ JSON Valid     â”‚
                    â”‚ âœ“ Fields Present â”‚
                    â”‚ âœ“ Types Correct  â”‚
                    â”‚ âœ“ Values Valid   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Test Pass âœ“      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§ª Test Dependency Tree

```
cart-addition.spec.ts
â”‚
â”œâ”€â”€ Fixtures
â”‚   â””â”€â”€ @fixtures/index
â”‚       â”œâ”€â”€ test (Playwright test)
â”‚       â”œâ”€â”€ expect (Assertions)
â”‚       â”œâ”€â”€ CartAPI (from fixtures)
â”‚       â””â”€â”€ apiContext
â”‚
â”œâ”€â”€ Test Data
â”‚   â””â”€â”€ @fixtures/test-data.ts
â”‚       â”œâ”€â”€ testUsers
â”‚       â”‚   â”œâ”€â”€ user1 {id: 'user-001'}
â”‚       â”‚   â”œâ”€â”€ user2 {id: 'user-002'}
â”‚       â”‚   â””â”€â”€ user3 {id: 'user-003'}
â”‚       â”œâ”€â”€ testProducts
â”‚       â”‚   â”œâ”€â”€ apples {id: '1', price: 3.99}
â”‚       â”‚   â”œâ”€â”€ bread {id: '2', price: 4.49}
â”‚       â”‚   â”œâ”€â”€ eggs {id: '3', price: 5.99}
â”‚       â”‚   â”œâ”€â”€ spinach {id: '4', price: 2.99}
â”‚       â”‚   â”œâ”€â”€ almondMilk {id: '5', price: 3.79}
â”‚       â”‚   â”œâ”€â”€ chickenBreast {id: '6', price: 9.99}
â”‚       â”‚   â”œâ”€â”€ brownRice {id: '7', price: 2.49}
â”‚       â”‚   â””â”€â”€ yogurt {id: '8', price: 4.99}
â”‚       â””â”€â”€ validAddToCartRequests
â”‚           â”œâ”€â”€ singleItem
â”‚           â”œâ”€â”€ largeQuantity
â”‚           â””â”€â”€ minimalData
â”‚
â”œâ”€â”€ Utilities
â”‚   â””â”€â”€ @utils/index
â”‚       â”œâ”€â”€ ResponseValidator
â”‚       â”œâ”€â”€ logger
â”‚       â””â”€â”€ configManager
â”‚
â”œâ”€â”€ Page Objects
â”‚   â””â”€â”€ CartAPI
â”‚       â”œâ”€â”€ addItemToCart(userId, item)
â”‚       â”œâ”€â”€ getCartItems(userId)
â”‚       â”œâ”€â”€ getCartSummary(userId)
â”‚       â””â”€â”€ itemExistsInCart(userId, productId)
â”‚
â””â”€â”€ Configuration
    â””â”€â”€ playwright.config.ts
        â”œâ”€â”€ baseURL: http://localhost:9002
        â”œâ”€â”€ timeout: 30000ms
        â””â”€â”€ reporters: [html, json, junit]
```

---

## ğŸ¯ Assertion Strategy

```
REQUEST
  â”‚
  â”œâ”€ Status Code Check
  â”‚  â””â”€ expect(response.status()).toBe(200)
  â”‚
  â”œâ”€ JSON Parsing
  â”‚  â””â”€ const body = await response.json()
  â”‚
  â”œâ”€ Structure Validation
  â”‚  â”œâ”€ expect(body).toHaveProperty('userId')
  â”‚  â”œâ”€ expect(body).toHaveProperty('items')
  â”‚  â”œâ”€ expect(body).toHaveProperty('itemCount')
  â”‚  â””â”€ expect(body).toHaveProperty('totalPrice')
  â”‚
  â”œâ”€ Type Validation
  â”‚  â”œâ”€ expect(typeof body.userId).toBe('string')
  â”‚  â”œâ”€ expect(typeof body.items).toBe('object')
  â”‚  â”œâ”€ expect(typeof body.itemCount).toBe('number')
  â”‚  â””â”€ expect(typeof body.totalPrice).toBe('number')
  â”‚
  â”œâ”€ Value Validation
  â”‚  â”œâ”€ expect(body.userId).toBe(testUsers.user1.id)
  â”‚  â”œâ”€ expect(body.itemCount).toBeGreaterThan(0)
  â”‚  â”œâ”€ expect(body.totalPrice).toBeGreaterThan(0)
  â”‚  â””â”€ expect(Array.isArray(body.items)).toBe(true)
  â”‚
  â”œâ”€ Business Logic Validation
  â”‚  â”œâ”€ Verify quantity matches request
  â”‚  â”œâ”€ Verify price calculation
  â”‚  â”œâ”€ Verify itemCount accuracy
  â”‚  â””â”€ Verify product details preserved
  â”‚
  â””â”€ Error Cases
     â”œâ”€ 400 Bad Request
     â”œâ”€ 404 Not Found
     â””â”€ Error message present
```

---

## ğŸ“Š Test Coverage Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Test Category       â”‚ Qty  â”‚ Coverage                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Happy Path          â”‚ 6    â”‚ âœ“âœ“âœ“âœ“âœ“âœ“                 â”‚
â”‚ Validation          â”‚ 3    â”‚ âœ“âœ“âœ“                     â”‚
â”‚ Multiple Items      â”‚ 3    â”‚ âœ“âœ“âœ“                     â”‚
â”‚ Error Scenarios     â”‚ 6    â”‚ âœ“âœ“âœ“âœ“âœ“âœ“                 â”‚
â”‚ Business Logic      â”‚ 4    â”‚ âœ“âœ“âœ“âœ“                    â”‚
â”‚ Edge Cases          â”‚ 3    â”‚ âœ“âœ“âœ“                     â”‚
â”‚ JSON Assertions     â”‚ 5    â”‚ âœ“âœ“âœ“âœ“âœ“                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL               â”‚ 30+  â”‚ âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“âœ“ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Execution Pipeline

```
npm test
    â”‚
    â”œâ”€ Find tests/cart-addition.spec.ts
    â”‚
    â”œâ”€ Load fixtures
    â”‚   â”œâ”€ apiContext
    â”‚   â””â”€ cartAPI
    â”‚
    â”œâ”€ Run test groups sequentially
    â”‚   â”œâ”€ Successful Item Addition
    â”‚   â”œâ”€ Response Structure Validation
    â”‚   â”œâ”€ Add Multiple Items
    â”‚   â”œâ”€ Error Handling
    â”‚   â”œâ”€ Business Logic Validation
    â”‚   â”œâ”€ Edge Cases
    â”‚   â””â”€ Response JSON Assertions
    â”‚
    â”œâ”€ Collect results
    â”‚   â”œâ”€ Passed tests: âœ“
    â”‚   â”œâ”€ Failed tests: âœ—
    â”‚   â””â”€ Skipped tests: âŠ˜
    â”‚
    â”œâ”€ Generate reports
    â”‚   â”œâ”€ HTML: playwright-report/index.html
    â”‚   â”œâ”€ JSON: test-results/results.json
    â”‚   â””â”€ JUnit: test-results/junit.xml
    â”‚
    â””â”€ Display summary
        â””â”€ X passed, Y failed, Z skipped
```

---

**Diagram Summary**: Complete test architecture, flow, dependencies, assertions, and execution pipeline for Cart Addition tests.
